import{_ as g,m as w,R as C,p as y,q as v,t as s,x as o,I as V,G as p,H as k,B as $,C as h,S as B,T as f,U as q,V as P,D as Q,r as u,w as S}from"./index-DeYsl4Op.js";const b=w({name:"CanvasView",components:{ViewPage:P},props:{model:{type:Object,default:()=>{}},storename:{type:String},show:{type:Boolean}},emits:["update:onCancel"],setup(e,{emit:a}){const{$q:l,$router:m}=Q(),r=u(!1),i=u(null),d=async()=>{try{const t=i.value;if(!t)throw new Error("Failed to process pdf");if(l.platform.is.ios||l.platform.is.safari)return await t.print();{const c=m.resolve({path:`/download/receipt/${e.storename}`,query:{data:encodeURIComponent(JSON.stringify(e.model))}});window.open(c.href,"_blank")}}catch(t){return l.notify({type:"info",color:"negative",message:t.message||t,progress:!0,timeout:3e3})}finally{a("update:onCancel",!1)}},n=u(null);return S(()=>e.show,t=>r.value=t),{dialog:r,view:i,makePdf:d,caption:n}}});function A(e,a,l,m,r,i){const d=C("ViewPage");return v(),y(q,{modelValue:e.dialog,"onUpdate:modelValue":a[2]||(a[2]=n=>e.dialog=n),persistent:""},{default:s(()=>[o(V,{dark:""},{default:s(()=>[o(p,null,{default:s(()=>[...a[3]||(a[3]=[k("div",{class:"text-h6"},"Confirmation",-1)])]),_:1}),o(p,{style:{"max-height":"50vh"},class:"q-mx-sm scroll"},{default:s(()=>[o(d,{ref:"view",model:e.model,"onUpdate:caption":a[0]||(a[0]=n=>e.caption=n)},null,8,["model"])]),_:1}),o(p,{class:"q-pt-none"},{default:s(()=>[$(" Are your print "+h(e.caption)+"? ",1)]),_:1}),o(B,{align:"right"},{default:s(()=>[o(f,{label:"cancel",color:"negative",onClick:a[1]||(a[1]=n=>e.$emit("update:onCancel",!1))}),o(f,{label:"sure",color:"primary",onClick:e.makePdf},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}const _=g(b,[["render",A]]);export{_ as default};
