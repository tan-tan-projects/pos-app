import{_ as T,m as Q,p as S,q as m,t as r,x as i,I as A,G as f,H as e,F as b,R as x,C as n,S as F,T as I,B as N,U as W,V as C,W as j,D as E,d as p,r as k,w as L,X as U,Y,Z as z}from"./index-B1MI28JB.js";const G=Q({name:"ReceiptView",props:{model:{type:Object,default:()=>{}},show:{type:Boolean}},emits:["update:onCancel"],setup(a,{emit:t}){const g=U.description,{$q:v,$date:d}=E(),l=p(()=>a.model),o=k(!1),q=p(()=>!l.value||!Array.isArray(l.value.items)?0:l.value.items.reduce((s,u)=>s+u.sub_total,0)),V=p(()=>d.formatDate(Date.now(),"DD/MM/YYYY HH:mm")),$=s=>s?d.formatDate(s,"DD/MM/YYYY"):"-",B=s=>s?.toLocaleString(),H=p(()=>l.value?.code??l.value?.name??l.value?.id),w=k(null),M=async()=>{Y.show({group:"receipt",message:"Download PDF",spinnerSize:"4em",backgroundColor:"rgba(0,0,0,0.4)"});try{const s=w.value;if(!s)return;const u=R=>R*25.4/96,y=s.scrollWidth,P=s.scrollHeight,c=u(y),D=u(P),h=new z({orientation:"portrait",unit:"mm",format:[c,D],compress:!0});await h.html(s,{autoPaging:!1,width:c,windowWidth:y,image:{quality:.5,type:"jpeg"},html2canvas:{width:c,height:D}}),h.save(`${d.formatDate(Date.now(),"DD/MM/YYYY HH:mm:ss")}.pdf`)}catch(s){return v.notify({type:"info",color:"negative",message:s.message||s,progress:!0,timeout:3e3})}finally{t("update:onCancel",!1),Y.hide("receipt")}};return L(()=>a.show,s=>o.value=s),{product:g,data:l,dialog:o,total:q,now:V,formatDate:$,n:B,caption:H,view:w,makePdf:M}}}),J={ref:"view",class:"receipt-container"},O={class:"text-center q-mb-md"},X={class:"receipt-title"},Z={class:"receipt-row"},K={class:"receipt-row"},_={class:"receipt-sub-row"},tt={class:"receipt-row total"},et={class:"q-mt-xs text-center text-caption"};function at(a,t,g,v,d,l){return m(),S(j,{modelValue:a.dialog,"onUpdate:modelValue":t[1]||(t[1]=o=>a.dialog=o),persistent:""},{default:r(()=>[i(A,{dark:""},{default:r(()=>[i(f,null,{default:r(()=>[...t[2]||(t[2]=[e("div",{class:"text-h6"},"Confirmation",-1)])]),_:1}),i(f,{style:{"max-height":"50vh"},class:"scroll"},{default:r(()=>[e("div",J,[e("div",O,[t[3]||(t[3]=e("img",{src:x,width:"40"},null,-1)),e("div",X,n(a.product),1),t[4]||(t[4]=e("div",{class:"receipt-sub"},"Jakarta, Indonesia",-1)),t[5]||(t[5]=e("div",{class:"receipt-sub"},"Telp: 0812-1234-5678",-1))]),e("div",Z,[t[6]||(t[6]=e("span",null,"Date",-1)),e("span",null,n(a.formatDate(a.data?.updated_at)??"-"),1)]),e("div",K,[t[7]||(t[7]=e("span",null,"Cashier",-1)),e("span",null,n(a.data.created_by?.name??"-"),1)]),t[9]||(t[9]=e("hr",null,null,-1)),(m(!0),b(F,null,I(a.data?.items,o=>(m(),b("section",{if:"",key:o.id,class:"receipt-item"},[e("div",null,n(o.product?.name),1),e("div",_,[e("span",null,n(o.quantity)+" x Rp "+n(a.n(o.price)),1),e("span",null,"Rp "+n(a.n(o.quantity*o.price)),1)])]))),128)),t[10]||(t[10]=e("hr",null,null,-1)),e("div",tt,[t[8]||(t[8]=e("b",null,"Total",-1)),e("b",null,"Rp "+n(a.n(a.total)),1)]),t[11]||(t[11]=e("div",{class:"q-mt-lg text-center text-caption"},"Thank you for shopping!",-1)),e("div",et,n(a.now),1)],512)]),_:1}),i(f,{class:"q-pt-none"},{default:r(()=>[N(" Are your print "+n(a.caption)+"? ",1)]),_:1}),i(W,{align:"right"},{default:r(()=>[i(C,{label:"cancel",color:"negative",onClick:t[0]||(t[0]=o=>a.$emit("update:onCancel",!1))}),i(C,{label:"sure",color:"primary",onClick:a.makePdf},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}const ot=T(G,[["render",at],["__scopeId","data-v-6a0bfd3b"]]);export{ot as default};
