import{_ as v,m as S,p as w,q as V,t as f,x as y,y as h,z as k,B as $,C as I,a6 as B,D as C,d as F,r as c,L as A}from"./index-CiMlwVHq.js";const N=S({name:"InputOptions",props:{modelValue:{type:[String,Number,Object]},label:{type:String},disable:{type:Boolean,default:!1},useInput:{type:Boolean,default:!1},type:{type:String,default:"option"},options:{type:Array,default:()=>[]},storename:{type:String},rules:{type:Array,default:()=>[]}},emits:["update:modelValue"],setup(e,{emit:u}){const{$q:s,$store:p}=C(),i=F({get:()=>e.modelValue,set:o=>u("update:modelValue",o)}),t=c([]),n=c(!0),m=o=>{const d=[],l=a=>{if(a!=null)if(Array.isArray(a))a.forEach(l);else if(typeof a=="object")for(const r in a)l(a[r]);else d.push(String(a).toLowerCase())};return l(o),d.join(" ")},g=async(o,d)=>{n.value=!0;try{const l=e.type==="api"?await p.load(e.storename):e.options,a=o?String(o).toLowerCase():"";if(a)t.value=l.filter(r=>m(r).includes(a));else if(t.value=l,i.value){const r=m(i.value);t.value=t.value.filter(b=>m(b).includes(r))}else t.value=t.value.slice(0,25)}catch(l){return s.notify({type:"negative",message:e.storename?`Failed filter options ${e.storename}`:l.message||l,progress:!0,timeout:1e3})}finally{n.value=!1,d(()=>t.value)}};return A(async()=>{try{switch(e.type){case"api":if(!e.storename)return s.notify({type:"negative",message:"Storename not found",progress:!0,timeout:1e3});t.value=await p.load(e.storename),t.value=t.value.length>=25?t.value.splice(0,25):t.value;break;default:if(!e.options)return s.notify({type:"negative",message:"options not found",progress:!0,timeout:1e3});t.value=e.options;break}}catch(o){s.notify({type:"negative",message:o.message||o,progress:!0,timeout:1e3})}finally{n.value=!1}}),{model:i,ops:t,loading:n,onFilter:g}}});function j(e,u,s,p,i,t){return V(),w(B,{dense:"",outlined:"","hide-bottom-space":"","lazy-rules":"",clearable:"",color:"black","bg-color":"white",type:e.type,storename:e.storename,disable:e.disable,label:e.label,"use-input":e.useInput,options:e.ops,loading:e.loading,rules:e.rules,modelValue:e.model,"onUpdate:modelValue":u[0]||(u[0]=n=>e.model=n),onFilter:e.onFilter},{"no-option":f(()=>[y(h,null,{default:f(()=>[y(k,null,{default:f(()=>[$(" No options "+I(e.label||""),1)]),_:1})]),_:1})]),_:1},8,["type","storename","disable","label","use-input","options","loading","rules","modelValue","onFilter"])}const O=v(N,[["render",j]]);export{O as default};
