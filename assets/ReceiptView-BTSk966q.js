import{_ as P,m as S,p as C,q as p,t as i,x as r,I as T,R as N,G as f,H as t,F as b,S as Q,C as n,T as A,U as I,B as F,V as L,W as k,X as U,D as E,d as c,r as Y,w as G,Y as O,Z as h,$ as j,a0 as x}from"./index-oAdzayMT.js";const z=S({name:"ReceiptView",props:{model:{type:Object,default:()=>{}},show:{type:Boolean}},emits:["update:onCancel"],setup(a,{emit:e}){const g=O.description,{$q:v,$date:u}=E(),l=c(()=>a.model),o=Y(!1),V=c(()=>!l.value||!Array.isArray(l.value.items)?0:l.value.items.reduce((s,d)=>s+d.sub_total,0)),$=c(()=>u.formatDate(Date.now(),"DD/MM/YYYY HH:mm")),R=s=>s?u.formatDate(s,"DD/MM/YYYY"):"-",q=s=>s?.toLocaleString(),B=c(()=>l.value?.code??l.value?.name??l.value?.id),w=Y(null),H=async()=>{h.show({group:"receipt",message:"Download PDF",spinnerSize:"4em",backgroundColor:"rgba(0,0,0,0.4)"});try{const s=w.value;if(!s)return;const d=await j(s,{useCORS:!0,allowTaint:!1,backgroundColor:"#ffffff",scale:window.devicePixelRatio>1?2:1}),M=d.toDataURL("image/png"),m=58,D=d.height*m/d.width,y=new x({unit:"mm",format:[m,D]});y.addImage(M,"PNG",0,0,m,D),y.save(`${u.formatDate(Date.now(),"DD/MM/YYYY HH:mm:ss")}.pdf`)}catch(s){return v.notify({type:"info",color:"negative",message:s.message||s,progress:!0,timeout:3e3})}finally{e("update:onCancel",!1),h.hide("receipt")}};return G(()=>a.show,s=>o.value=s),{product:g,data:l,dialog:o,total:V,now:$,formatDate:R,n:q,caption:B,view:w,makePdf:H}}}),J={ref:"view",class:"receipt-container"},W={class:"text-center q-mb-md"},X={class:"receipt-title"},Z={class:"receipt-row"},K={class:"receipt-row"},_={class:"receipt-sub-row"},ee={class:"receipt-row total"},te={class:"q-mt-xs text-center text-caption"};function ae(a,e,g,v,u,l){return p(),C(U,{modelValue:a.dialog,"onUpdate:modelValue":e[1]||(e[1]=o=>a.dialog=o),persistent:""},{default:i(()=>[r(T,{dark:""},{default:i(()=>[r(f,null,{default:i(()=>[...e[2]||(e[2]=[t("div",{class:"text-h6"},"Confirmation",-1)])]),_:1}),a.data.id?(p(),C(f,{key:0,style:{"max-height":"50vh"},class:"scroll"},{default:i(()=>[t("div",J,[t("div",W,[e[3]||(e[3]=t("img",{src:Q,width:"30"},null,-1)),t("div",X,n(a.product),1),e[4]||(e[4]=t("div",{class:"receipt-sub"},"Jakarta, Indonesia",-1)),e[5]||(e[5]=t("div",{class:"receipt-sub"},"Telp: 0812-1234-5678",-1))]),t("div",Z,[e[6]||(e[6]=t("span",null,"Date",-1)),t("span",null,n(a.formatDate(a.data?.updated_at)??"-"),1)]),t("div",K,[e[7]||(e[7]=t("span",null,"Cashier",-1)),t("span",null,n(a.data.created_by?.name??"-"),1)]),e[9]||(e[9]=t("hr",null,null,-1)),(p(!0),b(A,null,I(a.data?.items,o=>(p(),b("section",{if:"",key:o.id,class:"receipt-item"},[t("div",null,n(o.product?.name),1),t("div",_,[t("span",null,n(o.quantity)+" x Rp "+n(a.n(o.price)),1),t("span",null,"Rp "+n(a.n(o.quantity*o.price)),1)])]))),128)),e[10]||(e[10]=t("hr",null,null,-1)),t("div",ee,[e[8]||(e[8]=t("b",null,"Total",-1)),t("b",null,"Rp "+n(a.n(a.total)),1)]),e[11]||(e[11]=t("div",{class:"q-mt-lg text-center text-caption"},"Thank you for shopping!",-1)),t("div",te,n(a.now),1)],512)]),_:1})):N("",!0),r(f,{class:"q-pt-xs"},{default:i(()=>[F(" Are your print "+n(a.caption)+"? ",1)]),_:1}),r(L,{align:"right"},{default:i(()=>[r(k,{label:"cancel",color:"negative",onClick:e[0]||(e[0]=o=>a.$emit("update:onCancel",!1))}),r(k,{label:"sure",color:"primary",onClick:a.makePdf},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}const oe=P(z,[["render",ae],["__scopeId","data-v-1aefbb47"]]);export{oe as default};
