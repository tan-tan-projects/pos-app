import{_ as P,m as Q,p as S,q as g,t as r,x as i,I as T,G as w,H as e,F as k,R as I,C as n,S as N,T as E,B as F,U as L,V as C,W as U,D as G,d as u,r as Y,w as O,X as j,Y as $,Z as z,$ as J}from"./index-C3UqmTMy.js";const W=Q({name:"ReceiptView",props:{model:{type:Object,default:()=>{}},show:{type:Boolean}},emits:["update:onCancel"],setup(a,{emit:t}){const D=j.description,{$q:d,$date:p}=G(),l=u(()=>a.model),o=Y(!1),V=u(()=>!l.value||!Array.isArray(l.value.items)?0:l.value.items.reduce((s,m)=>s+m.sub_total,0)),h=u(()=>p.formatDate(Date.now(),"DD/MM/YYYY HH:mm")),q=s=>s?p.formatDate(s,"DD/MM/YYYY"):"-",B=s=>s?.toLocaleString(),M=u(()=>l.value?.code??l.value?.name??l.value?.id),b=Y(null),R=async()=>{$.show({group:"receipt",message:"Download PDF",spinnerSize:"4em",backgroundColor:"rgba(0,0,0,0.4)"});try{const s=b.value;if(!s)return;const m=d.platform.is.ios||d.platform.is.safari,c=await z(s,{scale:1}),H=c.toDataURL("image/png"),f=58,y=c.height*f/c.width,v=new J({unit:"mm",format:[f,y]});if(v.addImage(H,"PNG",0,0,f,y),m){const A=v.output("bloburl");window.open(A,"_blank")}else v.save(`${p.formatDate(Date.now(),"DD/MM/YYYY HH:mm:ss")}.pdf`)}catch(s){return d.notify({type:"info",color:"negative",message:s.message||s,progress:!0,timeout:3e3})}finally{t("update:onCancel",!1),$.hide("receipt")}};return O(()=>a.show,s=>o.value=s),{product:D,data:l,dialog:o,total:V,now:h,formatDate:q,n:B,caption:M,view:b,makePdf:R}}}),X={ref:"view",class:"receipt-container"},Z={class:"text-center q-mb-md"},x={class:"receipt-title"},K={class:"receipt-row"},_={class:"receipt-row"},tt={class:"receipt-sub-row"},et={class:"receipt-row total"},at={class:"q-mt-xs text-center text-caption"};function st(a,t,D,d,p,l){return g(),S(U,{modelValue:a.dialog,"onUpdate:modelValue":t[1]||(t[1]=o=>a.dialog=o),persistent:""},{default:r(()=>[i(T,{dark:""},{default:r(()=>[i(w,null,{default:r(()=>[...t[2]||(t[2]=[e("div",{class:"text-h6"},"Confirmation",-1)])]),_:1}),i(w,{style:{"max-height":"50vh"},class:"scroll"},{default:r(()=>[e("div",X,[t[9]||(t[9]=e("div",{class:"pdf-watermark"},"DEMO",-1)),e("div",Z,[t[3]||(t[3]=e("img",{src:I,width:"40"},null,-1)),e("div",x,n(a.product),1),t[4]||(t[4]=e("div",{class:"receipt-sub"},"Jakarta, Indonesia",-1)),t[5]||(t[5]=e("div",{class:"receipt-sub"},"Telp: 0812-1234-5678",-1))]),e("div",K,[t[6]||(t[6]=e("span",null,"Date",-1)),e("span",null,n(a.formatDate(a.data?.updated_at)??"-"),1)]),e("div",_,[t[7]||(t[7]=e("span",null,"Cashier",-1)),e("span",null,n(a.data.created_by?.name??"-"),1)]),t[10]||(t[10]=e("hr",null,null,-1)),(g(!0),k(N,null,E(a.data?.items,o=>(g(),k("section",{if:"",key:o.id,class:"receipt-item"},[e("div",null,n(o.product?.name),1),e("div",tt,[e("span",null,n(o.quantity)+" x Rp "+n(a.n(o.price)),1),e("span",null,"Rp "+n(a.n(o.quantity*o.price)),1)])]))),128)),t[11]||(t[11]=e("hr",null,null,-1)),e("div",et,[t[8]||(t[8]=e("b",null,"Total",-1)),e("b",null,"Rp "+n(a.n(a.total)),1)]),t[12]||(t[12]=e("div",{class:"q-mt-lg text-center text-caption"},"Thank you for shopping!",-1)),e("div",at,n(a.now),1)],512)]),_:1}),i(w,{class:"q-pt-none"},{default:r(()=>[F(" Are your print "+n(a.caption)+"? ",1)]),_:1}),i(L,{align:"right"},{default:r(()=>[i(C,{label:"cancel",color:"negative",onClick:t[0]||(t[0]=o=>a.$emit("update:onCancel",!1))}),i(C,{label:"sure",color:"primary",onClick:a.makePdf},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}const nt=P(W,[["render",st],["__scopeId","data-v-d32c9ef5"]]);export{nt as default};
