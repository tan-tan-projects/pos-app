import{a as ge,af as be,u as pe,g as ye,b as ke,d as r,r as X,ag as he,w as Ce,ah as ae,ai as Se,h as I,a8 as oe,aj as we,V as b,_ as Ve,m as qe,F as m,q as s,x as t,t as o,G as N,H as d,a1 as k,f as C,C as S,ak as te,al as ne,a2 as M,S as V,k as F,p as w,am as x,an as Pe,ao as $e,y as Y,z as $,A as H,B,T as K,I as W,ae as Be,ap as G,v as De,U as J,aq as Qe,W as Ae}from"./index-B0Szb3m8.js";import{Q as ze,a as Ie,u as Ne}from"./useView-xWCqWjKg.js";import{Q as Me}from"./QSlideTransition-DfA_OOPq.js";function O(e,l){return[!0,!1].includes(e)?e:l}const Fe=ge({name:"QPagination",props:{...pe,modelValue:{type:Number,required:!0},min:{type:[Number,String],default:1},max:{type:[Number,String],required:!0},maxPages:{type:[Number,String],default:0,validator:e=>(typeof e=="string"?parseInt(e,10):e)>=0},inputStyle:[Array,String,Object],inputClass:[Array,String,Object],size:String,disable:Boolean,input:Boolean,iconPrev:String,iconNext:String,iconFirst:String,iconLast:String,toFn:Function,boundaryLinks:{type:Boolean,default:null},boundaryNumbers:{type:Boolean,default:null},directionLinks:{type:Boolean,default:null},ellipses:{type:Boolean,default:null},ripple:{type:[Boolean,Object],default:null},round:Boolean,rounded:Boolean,flat:Boolean,outline:Boolean,unelevated:Boolean,push:Boolean,glossy:Boolean,color:{type:String,default:"primary"},textColor:String,activeDesign:{type:String,default:"",values:e=>e===""||be.includes(e)},activeColor:String,activeTextColor:String,gutter:String,padding:{type:String,default:"3px 2px"}},emits:["update:modelValue"],setup(e,{emit:l}){const{proxy:D}=ye(),{$q:c}=D,T=ke(e,c),f=r(()=>parseInt(e.min,10)),a=r(()=>parseInt(e.max,10)),p=r(()=>parseInt(e.maxPages,10)),u=r(()=>P.value+" / "+a.value),v=r(()=>O(e.boundaryLinks,e.input)),g=r(()=>O(e.boundaryNumbers,!e.input)),L=r(()=>O(e.directionLinks,e.input)),U=r(()=>O(e.ellipses,!e.input)),E=X(null),P=r({get:()=>e.modelValue,set:n=>{if(n=parseInt(n,10),e.disable||isNaN(n))return;const i=he(n,f.value,a.value);e.modelValue!==i&&l("update:modelValue",i)}});Ce(()=>`${f.value}|${a.value}`,()=>{P.value=e.modelValue});const ie=r(()=>"q-pagination row no-wrap items-center"+(e.disable===!0?" disabled":"")),R=r(()=>e.gutter in ae?`${ae[e.gutter]}px`:e.gutter||null),se=r(()=>R.value!==null?`--q-pagination-gutter-parent:-${R.value};--q-pagination-gutter-child:${R.value}`:null),j=r(()=>{const n=[e.iconFirst||c.iconSet.pagination.first,e.iconPrev||c.iconSet.pagination.prev,e.iconNext||c.iconSet.pagination.next,e.iconLast||c.iconSet.pagination.last];return c.lang.rtl===!0?n.reverse():n}),ue=r(()=>({"aria-disabled":e.disable===!0?"true":"false",role:"navigation"})),Z=r(()=>Se(e,"flat")),re=r(()=>({[Z.value]:!0,round:e.round,rounded:e.rounded,padding:e.padding,color:e.color,textColor:e.textColor,size:e.size,ripple:e.ripple!==null?e.ripple:!0})),de=r(()=>{const n={[Z.value]:!1};return e.activeDesign!==""&&(n[e.activeDesign]=!0),n}),me=r(()=>({...de.value,color:e.activeColor||e.color,textColor:e.activeTextColor||e.textColor})),Q=r(()=>{let n=Math.max(p.value,1+(U.value?2:0)+(g.value?2:0));const i={pgFrom:f.value,pgTo:a.value,ellipsesStart:!1,ellipsesEnd:!1,boundaryStart:!1,boundaryEnd:!1,marginalStyle:{minWidth:`${Math.max(2,String(a.value).length)}em`}};return p.value&&n<a.value-f.value+1&&(n=1+Math.floor(n/2)*2,i.pgFrom=Math.max(f.value,Math.min(a.value-n+1,e.modelValue-Math.floor(n/2))),i.pgTo=Math.min(a.value,i.pgFrom+n-1),g.value&&(i.boundaryStart=!0,i.pgFrom++),U.value&&i.pgFrom>f.value+(g.value?1:0)&&(i.ellipsesStart=!0,i.pgFrom++),g.value&&(i.boundaryEnd=!0,i.pgTo--),U.value&&i.pgTo<a.value-(g.value?1:0)&&(i.ellipsesEnd=!0,i.pgTo--)),i});function _(n){P.value=n}function fe(n){P.value=P.value+n}function ee(){P.value=E.value,E.value=null,c.platform.is.mobile===!0&&document.activeElement.blur()}function ce(n){E.value=n}function ve(n){we(n,13)===!0&&ee()}function h(n,i,A){const q={"aria-label":i,"aria-current":"false",...re.value,...n};return A===!0&&Object.assign(q,{"aria-current":"true",...me.value}),i!==void 0&&(e.toFn!==void 0?q.to=e.toFn(i):q.onClick=()=>{_(i)}),I(b,q)}return Object.assign(D,{set:_,setByOffset:fe}),()=>{const n=[],i=[];let A;if(v.value===!0&&(n.push(h({key:"bls",disable:e.disable||e.modelValue<=f.value,icon:j.value[0],"aria-label":c.lang.pagination.first},f.value)),i.unshift(h({key:"ble",disable:e.disable||e.modelValue>=a.value,icon:j.value[3],"aria-label":c.lang.pagination.last},a.value))),L.value===!0&&(n.push(h({key:"bdp",disable:e.disable||e.modelValue<=f.value,icon:j.value[1],"aria-label":c.lang.pagination.prev},e.modelValue-1)),i.unshift(h({key:"bdn",disable:e.disable||e.modelValue>=a.value,icon:j.value[2],"aria-label":c.lang.pagination.next},e.modelValue+1))),e.input!==!0){A=[];const{pgFrom:q,pgTo:le,marginalStyle:z}=Q.value;if(Q.value.boundaryStart===!0){const y=f.value===e.modelValue;n.push(h({key:"bns",style:z,disable:e.disable,label:f.value},f.value,y))}if(Q.value.boundaryEnd===!0){const y=a.value===e.modelValue;i.unshift(h({key:"bne",style:z,disable:e.disable,label:a.value},a.value,y))}Q.value.ellipsesStart===!0&&n.push(h({key:"bes",style:z,disable:e.disable,label:"…",ripple:!1},q-1)),Q.value.ellipsesEnd===!0&&i.unshift(h({key:"bee",style:z,disable:e.disable,label:"…",ripple:!1},le+1));for(let y=q;y<=le;y++)A.push(h({key:`bpg${y}`,style:z,disable:e.disable,label:y},y,y===e.modelValue))}return I("div",{class:ie.value,...ue.value},[I("div",{class:"q-pagination__content row no-wrap items-center",style:se.value},[...n,e.input===!0?I(oe,{class:"inline",style:{width:`${u.value.length/1.5}em`},type:"number",dense:!0,value:E.value,disable:e.disable,dark:T.value,borderless:!0,inputClass:e.inputClass,inputStyle:e.inputStyle,placeholder:u.value,min:f.value,max:a.value,"onUpdate:modelValue":ce,onKeyup:ve,onBlur:ee}):I("div",{class:"q-pagination__middle row justify-center"},A),...i])])}}}),Te=qe({name:"MobileView",props:{title:{type:String,default:"Default View"},icon:{type:String,default:"table_chart"},rows:{type:Array,required:!0,default:()=>[]},rowKey:{type:String,required:!0,default:"id"},columns:{type:Array,required:!0,default:()=>[]},loading:{type:Boolean,default:!1},pagination:{type:Object,required:!0,default:()=>({page:1,rowsNumber:0,rowsPerPage:25,sortBy:"createdAt",descending:!0})},defaultHeader:{type:Boolean,default:!0},showPeriod:{type:Boolean,default:!0},showTotalAmount:{type:Boolean,default:!1},defaultAction:{type:Boolean,default:!0},showDeleted:{type:Boolean,default:!1}},emits:["action","request","update:pagination","update:search","update:filter"],setup(e,{emit:l}){const D=Ne(e,l),c=X(!1),T=r(()=>e.columns.filter(v=>v.name!=="created_by").slice(0,2)),f=r(()=>e.columns.filter(v=>v.name!=="created_by").slice(2)),a=(v,g)=>{const L=typeof g.field=="function"?g.field(v):v[g.field||g.name];return g.format?g.format(L,v):L},p=X(null);return{...D,isSearch:c,firstColumns:T,remainingColumns:f,getCellValue:a,expandedIndex:p,toggleRow:v=>{p.value=p.value===v?null:v}}}}),Le={class:"row col-12 q-px-xs"},Ee={class:"text-h6 q-ma-sm"},je={key:0,class:"col-12 q-pa-xs"},xe={key:1,class:"q-pl-sm q-pt-none q-mt-none"},Oe={class:"label-caption"},Ue={class:"label-caption q-mx-sm"},Re={class:"column items-center"},Ye={key:1,class:"column items-center text-white absolute-center"},He={key:2,class:"row q-col-gutter-sm"},Ke={class:"row items-center wrap q-mb-xs"},We={class:"column"},Ge={class:"value"},Je={class:"column"},Xe={key:0,class:"label"},Ze={class:"value"},_e={class:"column"},el={class:"label"},ll={class:"value"},al={key:0,class:"text-right q-mt-sm"};function tl(e,l,D,c,T,f){return s(),m(V,null,[t(W,{class:"fit column no-wrap glasses-background text-white"},{default:o(()=>[t(N,{class:"no-padding row full-width items-center white-border"},{default:o(()=>[d("div",Le,[t(C,{name:e.icon,class:"q-pt-xs q-ma-sm",size:"18px"},null,8,["name"]),d("h2",Ee,S(e.title),1),t(te),t(b,{dense:"",flat:"",outline:"",icon:"more_vert",size:"12px"},{default:o(()=>[t(ne,{anchor:"top start",self:"top end","max-width":"120px","auto-close":""},{default:o(()=>[e.defaultHeader?(s(),m(V,{key:0},[F(t(b,{dense:"",flat:"",icon:"add",label:"add",class:"full-width",size:"12px",onClick:l[0]||(l[0]=a=>e.onAction("add"))},null,512),[[x]]),t(b,{dense:"",flat:"",icon:"print",label:"Export",color:"secondary",class:"full-width",size:"12px",onClick:l[4]||(l[4]=Pe(()=>{},["stop"]))},{default:o(()=>[t(ne,{anchor:"bottom left",self:"bottom end","auto-close":""},{default:o(()=>[t($e,null,{default:o(()=>[F((s(),w(Y,{clickable:"",onClick:l[1]||(l[1]=a=>e.onAction("print-pdf",{period:e.filter,search:e.search}))},{default:o(()=>[t($,{side:""},{default:o(()=>[t(C,{name:"cloud_download",color:"primary"})]),_:1}),t($,null,{default:o(()=>[t(H,null,{default:o(()=>[...l[16]||(l[16]=[B("Pdf",-1)])]),_:1})]),_:1})]),_:1})),[[x]]),F((s(),w(Y,{clickable:"",onClick:l[2]||(l[2]=a=>e.onAction("print-excel",{period:e.filter,search:e.search}))},{default:o(()=>[t($,{side:""},{default:o(()=>[t(C,{name:"cloud_download",color:"primary"})]),_:1}),t($,null,{default:o(()=>[t(H,null,{default:o(()=>[...l[17]||(l[17]=[B("Excel",-1)])]),_:1})]),_:1})]),_:1})),[[x]]),F((s(),w(Y,{clickable:"",onClick:l[3]||(l[3]=a=>e.onAction("print-csv",{period:e.filter,search:e.search}))},{default:o(()=>[t($,{side:""},{default:o(()=>[t(C,{name:"cloud_download",color:"primary"})]),_:1}),t($,null,{default:o(()=>[t(H,null,{default:o(()=>[...l[18]||(l[18]=[B("CSV",-1)])]),_:1})]),_:1})]),_:1})),[[x]])]),_:1})]),_:1})]),_:1}),e.$props.showPeriod?(s(),w(b,{key:0,dense:"",flat:"",label:"Period",color:"primary",class:"full-width","text-color":"black",icon:"event",size:"12px",onClick:l[5]||(l[5]=a=>e.dialog=!0)})):k("",!0)],64)):e.$slots.header?M(e.$slots,"header",{key:1},void 0,!0):k("",!0)]),_:3})]),_:3}),t(b,{dense:"",flat:"",outline:"",icon:"search",size:"12px",onClick:l[6]||(l[6]=a=>e.isSearch=!e.isSearch)})]),e.isSearch?(s(),m("div",je,[t(oe,{dense:"",outlined:"",color:"white","bg-color":"white",placeholder:"Search",modelValue:e.search,"onUpdate:modelValue":l[8]||(l[8]=a=>e.search=a)},{append:o(()=>[e.search===""?(s(),w(C,{key:0,name:"search"})):(s(),w(C,{key:1,name:"clear",class:"cursor-pointer",onClick:l[7]||(l[7]=a=>e.search="")}))]),_:1},8,["modelValue"])])):k("",!0),e.$props.showPeriod?(s(),m("div",xe,[d("span",Oe,"Period: "+S(e.formattedPeriod),1),e.filter.period&&(e.filter.period.from||e.filter.period.to)?(s(),w(b,{key:0,color:"negative",flat:"",round:"",size:"12px",icon:"close",onClick:l[9]||(l[9]=a=>(e.filter.period={from:null,to:null},e.onDateChange(null)))})):k("",!0)])):k("",!0),e.showTotalAmount?(s(),m(V,{key:2},[t(te),d("span",Ue," Total Amount: Rp"+S(e.totalAmount.toLocaleString()),1)],64)):k("",!0)]),_:3}),t(N,{class:"content-section"},{default:o(()=>[e.loading?(s(),w(ze,{key:0,showing:"",class:"glasses-background"},{default:o(()=>[d("div",Re,[t(Ie,{size:"4em"}),l[19]||(l[19]=d("div",{class:"q-mt-sm",style:{"font-size":"1.1em"}},"Please wait...",-1))])]),_:1})):e.rows.length===0?(s(),m("div",Ye,[t(C,{name:"do_not_disturb",size:"xl"}),l[20]||(l[20]=d("div",{class:"text-subtitle1 q-mt-sm"},"Your data is empty",-1))])):(s(),m("div",He,[(s(!0),m(V,null,K(e.rows,(a,p)=>(s(),m("div",{key:p,class:"col-12"},[t(W,{class:"content-card white-border q-pa-sm"},{default:o(()=>[t(N,{class:"no-padding"},{default:o(()=>[d("div",Ke,[t(Be,{size:"24px",color:"primary","text-color":"white",class:"q-mr-xs"},{default:o(()=>[B(S(a.created_by?.email?.charAt(0).toUpperCase()||"?"),1)]),_:2},1024),d("div",We,[l[21]||(l[21]=d("div",{class:"label"},"Created By",-1)),d("div",Ge,S(a.created_by?.email||"No Email"),1)])]),t(G,{color:"white"}),(s(!0),m(V,null,K(e.firstColumns,u=>(s(),m("div",{key:u.name,class:"q-my-xs"},[d("div",Je,[u.name!=="qrcode"?(s(),m("div",Xe,[t(C,{name:"label",size:"12px",class:"q-mr-xs"}),d("span",null,S(u.label),1)])):k("",!0),d("div",Ze,[e.$slots[u.name]?M(e.$slots,u.name,{key:0,row:a,col:u},void 0,!0):u.name==="qrcode"?M(e.$slots,"qrcode",{key:1,row:a},void 0,!0):(s(),m(V,{key:2},[B(S(e.getCellValue(a,u)),1)],64))])])]))),128)),t(Me,null,{default:o(()=>[F(d("div",null,[(s(!0),m(V,null,K(e.remainingColumns,u=>(s(),m("div",{key:u.name,class:"q-mb-xs"},[d("div",_e,[d("div",el,[t(C,{name:"label",size:"12px",class:"q-mr-xs"}),d("span",null,S(u.label),1)]),d("div",ll,[e.$slots[u.name]?M(e.$slots,u.name,{key:0,row:a,col:u},void 0,!0):(s(),m(V,{key:1},[B(S(e.getCellValue(a,u)),1)],64))])])]))),128))],512),[[De,e.expandedIndex===p]])]),_:2},1024),e.remainingColumns.length?(s(),m("div",al,[t(b,{flat:"",dense:"",size:"sm",color:"primary",label:e.expandedIndex===p?"Show less":"Read more...",onClick:u=>e.toggleRow(p)},null,8,["label","onClick"])])):k("",!0)]),_:2},1024),t(J,{class:"no-padding q-gutter-xs white-border"},{default:o(()=>[e.$slots.action?M(e.$slots,"action",{key:0,props:a},void 0,!0):k("",!0),t(b,{dense:"",round:"",outline:"",size:"xs",icon:"visibility",color:"info",onClick:u=>e.onAction("show",a)},null,8,["onClick"]),e.$props.showDeleted||a.id&&(a.status==="Draft"||a.level===0)?(s(),w(b,{key:1,dense:"",round:"",outline:"",size:"xs",icon:"delete",color:"negative",onClick:u=>e.onAction("delete",a)},null,8,["onClick"])):k("",!0)]),_:2},1024)]),_:2},1024)]))),128))]))]),_:3}),t(J,{class:"actions-section justify-center"},{default:o(()=>[t(Fe,{modelValue:e.model.page,"onUpdate:modelValue":[l[10]||(l[10]=a=>e.model.page=a),l[11]||(l[11]=a=>e.onRequest({pagination:{...e.model,page:a}}))],max:Math.ceil(e.model.rowsNumber/e.model.rowsPerPage),"max-pages":"5","boundary-numbers":"",color:"white","input-class":"text-white",input:""},null,8,["modelValue","max"])]),_:1})]),_:3}),t(Ae,{modelValue:e.dialog,"onUpdate:modelValue":l[15]||(l[15]=a=>e.dialog=a),persistent:""},{default:o(()=>[t(W,{style:{"min-width":"300px"}},{default:o(()=>[t(N,null,{default:o(()=>[...l[22]||(l[22]=[d("div",{class:"text-h6"},"Select Periode",-1)])]),_:1}),t(G),t(N,{class:"q-pa-none"},{default:o(()=>[t(Qe,{modelValue:e.filter.period,"onUpdate:modelValue":l[12]||(l[12]=a=>e.filter.period=a),range:!0,mask:"YYYY-MM-DD","today-btn":"",flat:"",minimal:""},null,8,["modelValue"])]),_:1}),t(G),t(J,{align:"right"},{default:o(()=>[t(b,{flat:"",label:"Cancel",color:"negative",onClick:l[13]||(l[13]=a=>(e.filter.period={from:null,to:null},e.onDateChange(null)))}),t(b,{flat:"",label:"OK",color:"primary",onClick:l[14]||(l[14]=a=>e.onDateChange(e.filter.period))})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}const sl=Ve(Te,[["render",tl],["__scopeId","data-v-91e35199"]]);export{sl as default};
